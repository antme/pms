<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
.k-grid-toolbar {
	height: 25px;
}

#role-edit {
	cursor: pointer;
}
</style>

        
<body>
	<div id="grid"></div>
	
<script type="text/x-kendo-template" id="purTemplate">
	<div class="toolbar">
		<button onclick="javascript:addPerchaseRequest()" id ="addPur">添加</button>
	</div>
</script>
<script>
function addPerchaseRequest(){
	alert("待完成...");
}
function editPerchaseRequest(e){
	alert("待完成...");
}
	
$(document).ready(function () {	
    var crudServiceBaseUrl = "../../service/purchase/request",
        dataSource = new kendo.data.DataSource({
            transport: {
                read:  {
                    url: crudServiceBaseUrl + "/list",
                    dataType: "jsonp",
                    type : "post"
                },
                update:  {
                    url: crudServiceBaseUrl + "/update",
                    dataType: "jsonp",
                    type : "post"
                },
                destroy: {
                    url: crudServiceBaseUrl + "/destroy",
                    dataType: "jsonp",
                    type : "post"
                },
                parameterMap: function(options, operation) {
                    if (operation !== "read" && options.models) {
                        return {models: kendo.stringify(options.models)};
                    }
                }
            },
            batch: false,
            pageSize: 10,
            schema: {
                model: {
                    id: "_id",
                    fields: {
                        _id: { editable: false, nullable: true },
                        code: { validation: { required: true } },
                        type: { validation: { required: true } },
                        customerContractCode : {},
                        purchaseOrderCode : {},
                        purchaseContractCode : {},
                        customerName : {},
                        projectManagerName : {},
                        status : {},
                        approvedDate : {},
                        money : {},
                        countOfOrder : {},
                        percentOfHasApplyGoods : {},
                        moneyOfHasApplyGoods : {}
                    }
                }
            }
        });

    $("#grid").kendoGrid({
        dataSource: dataSource,
        pageable: true,
        toolbar: kendo.template($("#purTemplate").html()),
        columns: [
            { field: "code", title: "编号" },
            { field: "type", title:"类型" },
            { field: "status", title:"申请状态" },
            { field: "projectManagerName", title:"PM" },
            { field: "approvedDate", title:"申请批准时间" },
            { field: "money", title:"金额" },
            { field: "customerName", title:"客户名" },
            { field: "customerContractCode", title:"客户合同编号" },
            { field: "purchaseOrderCode", title:"采购订单编号" },
            { field: "purchaseContractCode", title:"采购合同编号" },
            { field: "countOfOrder", title:"采购申请单数量" },
            { field: "percentOfHasApplyGoods", title:"已申请请货物%" },
            { field: "moneyOfHasApplyGoods", title:"已申请货物金额" },
            { command: [{text: "编辑",onclick:"editPerchaseRequest()"},{name: "destroy", text: "删除"}], title: "&nbsp;" }
        ],
        editable: "popup"
    });

   	
});
</script>
	
</body>