<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
.k-grid-toolbar {
	height: 25px;
}
</style>
<body>
	<div id="roleitem" class="k-content">
		<div id="grid"></div>
		<script>
			var dataSource = new kendo.data.DataSource({
				transport : {
					read : {
						url : "../service/user/list",
						dataType : "jsonp"
					},
					update : {
						url : "../service/user/update",
						dataType : "jsonp",
						type : "post"
					},
					create : {
						url : "../service/user/add",
						dataType : "jsonp",
						type : "post"
					},
					
					destroy: {
						url : "../service/user/delete",
						dataType : "jsonp",
						type : "post"
					},
					
					parameterMap : function(options, operation) {
						if (operation !== "read" && options.models) {
							return {
								models : kendo.stringify(options.models)
							};
						}
					},
				},
				pageSize : 10,
				batch : true,
				schema : {
					model : {
						id : "_id",
						fields : {
							_id : {
								editable : false,
								nullable : true
							},
							userName : {
								validation : {
									required : true
								}
							},
							password : {
								validation : {
									required : true
								}
							}
						}
					}	                

				}
			});

			$("#grid").kendoGrid({
				dataSource : dataSource,
				pageable : true,
				editable : "popup",
				toolbar : [ "create" ],
				columns : [ {
					field : "userName",
					title : "用户名"
				}, {
                    field : "role",
                    title : "角色"
                },{
					field : "password",
					title : "密码"
				}, {
					command : [
					           "edit",
					    {
						name : "destroy",
						title : "删除",
						text : "删除"
					} ],
					title : "&nbsp;",
					width : "160px"
				} ]

			});
		</script>

	</div>
</body>